<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>Deploy the Frontend Application Components on Google Kubernetes Engine (GKE) - Hybrid Cloud IoT App</title>
        <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../css/font-awesome.min.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->

        <script src="../js/jquery-1.10.2.min.js" defer></script>
        <script src="../js/bootstrap-3.0.3.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
            <div class="container">

                <!-- Collapsed navigation -->
                <div class="navbar-header">
                    <!-- Expander button -->
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="..">Hybrid Cloud IoT App</a>
                </div>

                <!-- Expanded navigation -->
                <div class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li >
                                <a href="../AWS_IoT/">AWS IoT Core Configuration</a>
                            </li>
                            <li >
                                <a href="../RaPi_with_Sensor/">Raspberry Pi with Humidity and Temperature Sensor Configuration</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav navbar-right">
                        <li>
                            <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li>
                                <a href="https://github.com/pradeesi/HybridCloudApp/tree/master/HybridCloudApp/Documentation/edit/master/docs/deploy_frontend.md"><i class="fa fa-github"></i> Edit on GitHub</a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#deploy-the-frontend-application-components-on-google-kubernetes-engine-gke">Deploy the Frontend Application Components on Google Kubernetes Engine (GKE)</a></li>
            <li><a href="#1-login-to-google-cloud-console-and-open-kubernetes-engine">1. Login to Google Cloud Console and Open Kubernetes Engine:</a></li>
            <li><a href="#2-start-creating-deployment-definition">2. Start Creating Deployment Definition:</a></li>
            <li><a href="#3-add-frontend_server-container-image-to-the-deployment-definition">3. Add 'frontend_server' Container Image to the Deployment Definition:</a></li>
            <li><a href="#4-add-environment-variables-to-the-frontend_server-container">4. Add Environment Variables to the 'frontend_server' Container:</a></li>
            <li><a href="#5-add-second-container-image-nginx_srvr-to-the-deployment-definition">5. Add Second Container Image ('nginx_srvr') to the Deployment Definition:</a></li>
            <li><a href="#6-add-application-name-select-cluster-and-deploy-the-application">6. Add Application Name, Select Cluster and Deploy the Application:</a></li>
            <li><a href="#7-expose-the-application-by-creating-kubernetes-service">7. Expose the Application by Creating Kubernetes Service:</a></li>
            <li><a href="#8-open-the-application-dashboard">8. Open the Application Dashboard:</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="deploy-the-frontend-application-components-on-google-kubernetes-engine-gke">Deploy the Frontend Application Components on Google Kubernetes Engine (GKE)</h1>
<p>In this section you would deploy the frontend components of the IoT Application on the Google Kubernetes Engine. Following diagram shows the high-level architure of these frontend application containers -</p>
<p><img alt="Rapi" src="https://raw.githubusercontent.com/pradeesi/HybridCloudApp/master/HybridCloudApp/Documentation/images/frontend_app_architecture.png" /></p>
<h3 id="1-login-to-google-cloud-console-and-open-kubernetes-engine">1. Login to Google Cloud Console and Open Kubernetes Engine:</h3>
<ul>
<li>Login to Google Cloud Console using the credentials provided by the lab instructor.</li>
</ul>
<h3 id="2-start-creating-deployment-definition">2. Start Creating Deployment Definition:</h3>
<ul>
<li>
<p><strong>2.1:</strong> Select the '<strong>Workloads</strong>' option on "<strong>Google Cloud Console --&gt; Kubernetes Engine</strong>" page, and click on the '<strong>Deploy</strong>' button as shown in the following screenshot -</p>
<p><img alt="Rapi" src="https://raw.githubusercontent.com/pradeesi/HybridCloudApp/master/HybridCloudApp/Documentation/images/deploy_gke_workload_1.png" /></p>
</li>
</ul>
<h3 id="3-add-frontend_server-container-image-to-the-deployment-definition">3. Add 'frontend_server' Container Image to the Deployment Definition:</h3>
<ul>
<li>
<p><strong>3.1:</strong> Click on the '<strong>Select Google Container Registry Image</strong>' button on the 'Create Deployment' page as shown in the following screenshot -</p>
<p><img alt="Rapi" src="https://raw.githubusercontent.com/pradeesi/HybridCloudApp/master/HybridCloudApp/Documentation/images/deploy_gke_workload_2.png" /></p>
</li>
<li>
<p><strong>3.2:</strong> Select the '<strong>frontend_server</strong>' container image from the pop-up window and clikc on the '<strong>SELECT</strong>' button as shown in the following screenshot -</p>
<p><img alt="Rapi" src="https://raw.githubusercontent.com/pradeesi/HybridCloudApp/master/HybridCloudApp/Documentation/images/deploy_gke_workload_3.png" /></p>
</li>
</ul>
<h3 id="4-add-environment-variables-to-the-frontend_server-container">4. Add Environment Variables to the 'frontend_server' Container:</h3>
<ul>
<li>
<p><strong>4.1:</strong> Click on the '+ Add environment variable' button to add the environment variables for the 'frontend_server' container as shown in the following screenshot -</p>
<p><img alt="Rapi" src="https://raw.githubusercontent.com/pradeesi/HybridCloudApp/master/HybridCloudApp/Documentation/images/deploy_gke_workload_4.png" /></p>
</li>
<li>
<p><strong>4.2:</strong> Add '<strong>BACKEND_HOST</strong>' and '<strong>BACKEND_PORT</strong>' variables as shown in the following screenshot (Use the values for 'BACKEND_HOST' and 'BACKEND_PORT' from the REST API Agent <strong>NodePort Service</strong> created earlier) -</p>
<p><img alt="Rapi" src="https://raw.githubusercontent.com/pradeesi/HybridCloudApp/master/HybridCloudApp/Documentation/images/deploy_gke_workload_5.png" /></p>
</li>
</ul>
<h3 id="5-add-second-container-image-nginx_srvr-to-the-deployment-definition">5. Add Second Container Image ('nginx_srvr') to the Deployment Definition:</h3>
<ul>
<li>
<p><strong>5.1:</strong> After clicking on the '<strong>+ Add Container</strong>' button (shown in the previous screenshot), click again on the '<strong>Select Google Container Registry image</strong>' and select '<strong>nginx_srvr</strong>' image from the pop-up window. </p>
<p>After selecting the image, click on the '<strong>Done</strong>' button as shown in the following screenshot -</p>
<p><img alt="Rapi" src="https://raw.githubusercontent.com/pradeesi/HybridCloudApp/master/HybridCloudApp/Documentation/images/deploy_gke_workload_6.png" /></p>
</li>
</ul>
<h3 id="6-add-application-name-select-cluster-and-deploy-the-application">6. Add Application Name, Select Cluster and Deploy the Application:</h3>
<ul>
<li>
<p><strong>6.1:</strong> Verify that you have '<strong>frontend_server</strong>' and '<strong>nginx_srvr</strong>' container images selected on your screen.</p>
</li>
<li>
<p><strong>6.2:</strong> Change the application name to '<strong>iot-frontend-\&lt;user-#></strong>' and select the 'Cluster' from the drop down menu. </p>
<p>Now you can click on the 'Deploy' button as shown in the following screenshot -</p>
<p><img alt="Rapi" src="https://raw.githubusercontent.com/pradeesi/HybridCloudApp/master/HybridCloudApp/Documentation/images/deploy_gke_workload_7.png" /></p>
<blockquote>
<p><strong>Importnat:</strong> Application deployment may take some time. Wait for it's completion before proceeding with the next steps.</p>
</blockquote>
</li>
</ul>
<h3 id="7-expose-the-application-by-creating-kubernetes-service">7. Expose the Application by Creating Kubernetes Service:</h3>
<ul>
<li>
<p><strong>7.1:</strong> Click on your Workload 'Name' (Deployment) as shown in the following screenshot -</p>
<p><img alt="Rapi" src="https://raw.githubusercontent.com/pradeesi/HybridCloudApp/master/HybridCloudApp/Documentation/images/deploy_gke_workload_8.png" /></p>
</li>
<li>
<p><strong>7.2:</strong> Click on the '<strong>Deploy</strong>' button as shown in the following screenshot -</p>
<p><img alt="Rapi" src="https://raw.githubusercontent.com/pradeesi/HybridCloudApp/master/HybridCloudApp/Documentation/images/deploy_gke_workload_9.png" /></p>
</li>
<li>
<p><strong>7.3:</strong> In the 'New Port Mapping' set '<strong>Port</strong>' and '<strong>Target Port</strong>' as '<strong>80</strong>' and click on the '<strong>Done</strong>' button.</p>
<p>Make sure the '<strong>Service type</strong>' is '<strong>Load balancer</strong>' and click on the '<strong>Expose</strong>' button as shown in the following screenshot -</p>
<p><img alt="Rapi" src="https://raw.githubusercontent.com/pradeesi/HybridCloudApp/master/HybridCloudApp/Documentation/images/deploy_gke_workload_10.png" /></p>
<blockquote>
<p><strong>Important:</strong> Service deployment may take some time. Wait for it before proceeding with the next steps.</p>
</blockquote>
</li>
</ul>
<h3 id="8-open-the-application-dashboard">8. Open the Application Dashboard:</h3>
<ul>
<li>
<p><strong>8.1:</strong> Go to '<strong>Kubernetes Engine --&gt; Services</strong>' and cick on the '<strong>Endpoints</strong>' respective to your kubernetes service as shown in the following screenshot -</p>
<p><img alt="Rapi" src="https://raw.githubusercontent.com/pradeesi/HybridCloudApp/master/HybridCloudApp/Documentation/images/deploy_gke_workload_11.png" /></p>
</li>
<li>
<p><strong>8.2:</strong> You should see the following webpage in the new tab of your browser. Click on the "Open Dashboard" button to open the application dashboard as shown in the following screenshot -</p>
<p><img alt="Rapi" src="https://raw.githubusercontent.com/pradeesi/HybridCloudApp/master/HybridCloudApp/Documentation/images/deploy_gke_workload_12.png" /></p>
</li>
<li>
<p><strong>8.3:</strong> If you see the following web-page with charts filled with data, your application is working :-) Congratulations!!!</p>
<p><img alt="Rapi" src="https://raw.githubusercontent.com/pradeesi/HybridCloudApp/master/HybridCloudApp/Documentation/images/deploy_gke_workload_14.png" /></p>
</li>
</ul></div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "..",
                shortcuts = {"search": 83, "next": 78, "help": 191, "previous": 80};
        </script>
        <script src="../js/base.js" defer></script>
        <script src="../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="Keyboard Shortcuts Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Keyboard Shortcuts</h4>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
